defaultNamespace: cattle-monitoring-system

helm:
  releaseName: rancher-monitoring
  repo: https://charts.rancher.io
  chart: rancher-monitoring
  version: 100.1.3+up19.0.3
  values:
    k3sServer:
      enabled: true
    prometheus:
      prometheusSpec:
        resources:
          limits:
            cpu: 3500m
            memory: 5000Mi
          requests:
            cpu: 250m
            memory: 250Mi
        retention: 4h
      ingress:
        enabled: true
        annotations:
          cert-manager.io/cluster-issuer: selfsigned-cluster-issuer
          traefik.ingress.kubernetes.io/router.middlewares: cattle-monitoring-system-basic-auth@kubernetescrd
        paths:
          - /
        pathType: Prefix

diff:
  comparePatches:
    - apiVersion: admissionregistration.k8s.io/v1
      kind: MutatingWebhookConfiguration
      name: rancher-monitoring-admission
      operations:
        - {"op":"remove", "path":"/webhooks"}
    - apiVersion: admissionregistration.k8s.io/v1
      kind: ValidatingWebhookConfiguration
      name: rancher-monitoring-admission
      operations:
        - {"op":"remove", "path":"/webhooks"}


dependsOn:
  - name: monitoring-all-monitoring-all-monitoring-crd
